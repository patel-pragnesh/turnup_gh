function __processArg(e,i){var t=null;return e&&(t=e[i]||null,delete e[i]),t}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="itemGrid",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,i={},t={};e.__views.itemGrid=Ti.UI.createWindow({backgroundColor:Alloy.CFG.Colors.BackgroundColor,opacity:1,width:Ti.UI.FILL,height:Ti.UI.FILL,layout:"vertical",navBarHidden:!0,id:"itemGrid"}),e.__views.itemGrid&&e.addTopLevelView(e.__views.itemGrid),e.__views.__alloyId18=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL,backgroundColor:Alloy.CFG.Colors.MainColor,top:0,id:"__alloyId18"}),e.__views.itemGrid.add(e.__views.__alloyId18),e.__views.AppWrapper=Ti.UI.createView({height:Ti.UI.SIZE,id:"AppWrapper"}),e.__views.__alloyId18.add(e.__views.AppWrapper),e.__views.mainTitle=Ti.UI.createLabel({font:{fontSize:20,fontFamily:"Jengle Jungallery"},height:44.4,color:"#FFF",left:"30",id:"mainTitle",text:"Item Grid"}),e.__views.AppWrapper.add(e.__views.mainTitle),p?e.__views.mainTitle.addEventListener("click",p):t["$.__views.mainTitle!click!closeWindow"]=!0,e.__views.imgBack=Ti.UI.createImageView({width:30,height:30,left:5,right:5,id:"imgBack"}),e.__views.AppWrapper.add(e.__views.imgBack),p?e.__views.imgBack.addEventListener("click",p):t["$.__views.imgBack!click!closeWindow"]=!0,e.__views.itemGridView=Ti.UI.createScrollView({height:Ti.UI.FILL,width:Ti.UI.FILL,id:"itemGridView"}),e.__views.itemGrid.add(e.__views.itemGridView),i.destroy=function(){},_.extend(e,e.__views);var o=require("platformSupport"),r=require("animation"),a=require("loadingWindow"),n=arguments[0]||{},l=160,s=0,d=0,c=0,h=0,g=[],u=0,m=require("loader"),w=require("icomoonlib"),I=function(){if(s=parseInt(d/l),h=d-s*l,l+=h/s,h%=s,null!=s)for(var e=0;s>e;e++)g.push(0);u=d-h},p=function(){Ti.App.Properties.setString("isWinOpen","no"),r.out(e.itemGrid)},v=function(){for(var e=0,i=1;s>i;i++)g[e]>g[i]&&(e=i);return e},f=function(e){var i=Alloy.createController("itemGridLayout",e).getView();return i},y=function(i){var t=v(),o=t*l;i.left=o,i.top=g[t],g[t]+=i.iHeight,e.itemGridView.add(i)},T=function(){o.isiOS7Plus()&&(e.AppWrapper.top=20),Alloy.isTablet&&(l=200),d=o.getScreenWidth(),c=o.getScreenHeight(),I(),e.itemGridView.contentWidth=u,e.itemGridView.width=u,e.itemGridView.left=h/2,e.mainTitle.text=n.name;for(var i=0;i<n.items.length;i++){var t={width:n.items[i].images[0].width,height:n.items[i].images[0].height};Ti.API.info(Alloy.CFG.Urls.imagePathURL+n.items[i].images[0].path);var r={image:Alloy.CFG.Urls.imagePathURL+n.items[i].images[0].path,title:n.items[i].name,like:21*i,msg:13*i,scale:t,viewWidth:l,item:n.items[i]};y(f(r))}L()};Ti.App.addEventListener("refreshGrid",function(){console.log(">>>>> Refresh Item Grid <<<<<<");var e={callbackFunction:A,url:Alloy.CFG.Urls.baseURL+Alloy.CFG.Urls.getItemsByCategoryId+n.id+"/item/all"};console.log(Alloy.CFG.Urls.baseURL+Alloy.CFG.Urls.getItemsByCategoryId+n.id+"/item/all"),m.get(e)});var A=function(i){n="",n=i,e.itemGridView.removeAllChildren(),s=0,d=0,c=0,h=0,g=[],u=0,l=Alloy.isTablet?200:160,T()},L=function(){var i=w.getIcon("panacea","back",35,{color:Alloy.CFG.Colors.IconWhite});e.imgBack.image=i};e.itemGrid.addEventListener("open",function(){T(),a.endLoading()}),t["$.__views.mainTitle!click!closeWindow"]&&e.__views.mainTitle.addEventListener("click",p),t["$.__views.imgBack!click!closeWindow"]&&e.__views.imgBack.addEventListener("click",p),_.extend(e,i)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;