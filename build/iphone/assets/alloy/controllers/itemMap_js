function __processArg(e,i){var t=null;return e&&(t=e[i]||null,delete e[i]),t}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="itemMap",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,i={},t={};e.__views.mapWindow=Ti.UI.createWindow({backgroundColor:"#FFF",opacity:1,width:Ti.UI.FILL,height:Ti.UI.FILL,layout:"vertical",navBarHidden:!0,id:"mapWindow"}),e.__views.mapWindow&&e.addTopLevelView(e.__views.mapWindow),e.__views.__alloyId19=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL,backgroundColor:Alloy.CFG.Colors.MainColor,top:0,id:"__alloyId19"}),e.__views.mapWindow.add(e.__views.__alloyId19),e.__views.AppWrapper=Ti.UI.createView({height:Ti.UI.SIZE,id:"AppWrapper"}),e.__views.__alloyId19.add(e.__views.AppWrapper),e.__views.mainTitle=Ti.UI.createLabel({font:{fontSize:20,fontFamily:"Jengle Jungallery"},height:44.4,color:"#FFF",left:"30",id:"mainTitle",text:"Explore On Map"}),e.__views.AppWrapper.add(e.__views.mainTitle),m?e.__views.mainTitle.addEventListener("click",m):t["$.__views.mainTitle!click!closeWindow"]=!0,e.__views.imgBack=Ti.UI.createImageView({width:25,height:25,left:5,right:5,id:"imgBack"}),e.__views.AppWrapper.add(e.__views.imgBack),m?e.__views.imgBack.addEventListener("click",m):t["$.__views.imgBack!click!closeWindow"]=!0,e.__views.mapView=Ti.UI.createScrollView({height:Ti.UI.FILL,width:Ti.UI.FILL,id:"mapView"}),e.__views.mapWindow.add(e.__views.mapView),i.destroy=function(){},_.extend(e,e.__views);var o=require("animation"),r=require("platformSupport"),a=arguments[0]||{},n=require("ti.map");require("loader");var l=require("icomoonlib"),s=require("loadingWindow"),d=n.createView({mapType:n.NORMAL_TYPE,region:{latitude:5.566987,longitude:-.183549,latitudeDelta:.1,longitudeDelta:.1}}),c=function(){var e=l.getIcon("panacea","annotation",20,{color:Alloy.CFG.Colors.MainColor_Dark});if(null!=a.items)for(var i=0;i<a.items.length;i++){var t=n.createAnnotation({latitude:g(a.items[i].coordinate,"lat"),longitude:g(a.items[i].coordinate,"long"),pincolor:n.ANNOTATION_AZURE,title:a.items[i].name,subtitle:a.items[i].description,itemId:a.items[i].id,image:e,itemArgs:a.items[i]});"android"!=Ti.Platform.osname&&(t.rightButton=Ti.UI.iPhone.SystemButton.INFO_DARK),d.addAnnotation(t)}u(),s.endLoading()};d.addEventListener("click",function(e){e.source;var i=e.clicksource;if("android"!=Ti.Platform.osname){if("rightButton"==i){Ti.API.info("Annotation "+e.title+" clicked, id: "+e.annotation.itemArgs);var t={item:e.annotation.itemArgs};console.log(JSON.stringify(t)),h(t)}}else if("pin"!=i&null!=i){Ti.API.info("Annotation "+e.title+" clicked, id: "+e.annotation.itemId);var t={item:e.annotation.itemArgs};console.log(JSON.stringify(t)),h(t)}});var h=function(e){var i=Alloy.createController("itemDetail",e).getView();o.in(i)},g=function(e,i){var t=e.split(",");return"lat"==i?t[0]:t[1]},m=function(){o.out(e.mapWindow)};r.isiOS7Plus()&&(e.AppWrapper.top=20);var u=function(){var i=l.getIcon("panacea","back",35,{color:Alloy.CFG.Colors.IconWhite});e.imgBack.image=i};e.mapWindow.addEventListener("open",function(){c(),e.mapView.add(d)}),t["$.__views.mainTitle!click!closeWindow"]&&e.__views.mainTitle.addEventListener("click",m),t["$.__views.imgBack!click!closeWindow"]&&e.__views.imgBack.addEventListener("click",m),_.extend(e,i)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;