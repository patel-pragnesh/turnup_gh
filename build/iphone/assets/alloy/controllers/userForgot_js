function __processArg(e,i){var t=null;return e&&(t=e[i]||null,delete e[i]),t}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="userForgot",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,i={},t={};e.__views.userForgot=Ti.UI.createWindow({backgroundColor:"#FFF",opacity:1,width:Ti.UI.FILL,height:Ti.UI.FILL,layout:"vertical",navBarHidden:!0,id:"userForgot"}),e.__views.userForgot&&e.addTopLevelView(e.__views.userForgot),e.__views.__alloyId31=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL,backgroundColor:Alloy.CFG.Colors.MainColor,top:0,id:"__alloyId31"}),e.__views.userForgot.add(e.__views.__alloyId31),e.__views.AppWrapper=Ti.UI.createView({height:Ti.UI.SIZE,id:"AppWrapper"}),e.__views.__alloyId31.add(e.__views.AppWrapper),e.__views.mainTitle=Ti.UI.createLabel({font:{fontSize:20,fontFamily:"Jengle Jungallery"},height:44.4,color:"#FFF",left:"30",id:"mainTitle",text:"Forgot Password"}),e.__views.AppWrapper.add(e.__views.mainTitle),g?e.__views.mainTitle.addEventListener("click",g):t["$.__views.mainTitle!click!closeWindow"]=!0,e.__views.imgBack=Ti.UI.createImageView({left:5,width:30,height:30,right:5,id:"imgBack"}),e.__views.AppWrapper.add(e.__views.imgBack),g?e.__views.imgBack.addEventListener("click",g):t["$.__views.imgBack!click!closeWindow"]=!0,e.__views.forgotPasswordView=Ti.UI.createScrollView({layout:"vertical",left:15,right:15,top:5,id:"forgotPasswordView"}),e.__views.userForgot.add(e.__views.forgotPasswordView),e.__views.__alloyId32=Ti.UI.createView({layout:"horizontal",width:Ti.UI.SIZE,height:Ti.UI.SIZE,top:5,left:"0",id:"__alloyId32"}),e.__views.forgotPasswordView.add(e.__views.__alloyId32),e.__views.imgEmailForgot=Ti.UI.createImageView({top:15,width:15,height:15,left:5,right:5,id:"imgEmailForgot"}),e.__views.__alloyId32.add(e.__views.imgEmailForgot),e.__views.lblEmail=Ti.UI.createLabel({font:{fontSize:19,fontFamily:"BodoniFLF",fontWeight:"bold"},height:Ti.UI.SIZE,textAlign:"left",text:"Email",top:"9",color:"#464646",id:"lblEmail"}),e.__views.__alloyId32.add(e.__views.lblEmail),e.__views.txtEmailForgot=Ti.UI.createTextField({top:5,width:"98%",left:"1%",right:"1%",borderWidth:1,borderColor:Alloy.CFG.Colors.MainColor,backgroundColor:"#EEE",color:"#222",font:{fontFamily:"BodoniFLF"},borderRadius:3,height:40,paddingLeft:5,paddingRight:5,id:"txtEmailForgot",hintText:"Email"}),e.__views.forgotPasswordView.add(e.__views.txtEmailForgot),e.__views.btnRequest=Ti.UI.createButton({font:{fontSize:18,fontFamily:"BodoniFLF"},height:33.3,top:20,bottom:10,width:"98%",left:"1%",right:"1%",backgroundColor:Alloy.CFG.Colors.MainColor,backgroundSelectedColor:Alloy.CFG.Colors.MainColor_Dark,borderColor:Alloy.CFG.Colors.MainPressedColor,color:Alloy.CFG.Colors.TextColor,backgroundImage:"null",selectedColor:"#AAA",id:"btnRequest",title:" Request "}),e.__views.forgotPasswordView.add(e.__views.btnRequest),m?e.__views.btnRequest.addEventListener("click",m):t["$.__views.btnRequest!click!forgotProcess"]=!0,i.destroy=function(){},_.extend(e,e.__views),arguments[0]||{};var o=require("platformSupport"),r=require("animation"),a=require("loader"),l=require("validationRules"),n=require("psdialog"),s=0,d=require("icomoonlib"),s=0,c=require("loadingWindow");c.endLoading(),o.isiOS7Plus()&&(e.AppWrapper.top=20);var g=function(){r.out(e.userForgot)},m=function(){if(u())if(1==Titanium.Network.online){c.startLoading();var i={callbackFunction:h,url:Alloy.CFG.Urls.BaseURL+ALloy.CFG.Urls.getForgotPassword+e.txtEmailForgot.value.toLowerCase()};a.get(i)}else n.loadCustomDialog("Forgot Password",Alloy.CFG.Languages.offlineMessage)},h=function(e){c.endLoading(),e.success&&(n.loadCustomDialog("Forgot Password",Alloy.CFG.Languages.forgotPasswordMessage),g())},u=function(){return""==e.txtEmailForgot.value?(l.validationFailAction(e.txtEmailForgot),s=0,!1):l.validateEmail(e.txtEmailForgot.value)?!0:(l.validationFailAction(e.txtEmailForgot),s=0,!1)};e.txtEmailForgot.addEventListener("change",function(){0==s&&(l.backToNormal(e.txtEmailForgot),s=1)});var w=function(){var i=d.getIcon("panacea","envelope",35,{color:Alloy.CFG.Colors.IconColor});e.imgEmailForgot.image=i;var t=d.getIcon("panacea","back",35,{color:Alloy.CFG.Colors.IconWhite});e.imgBack.image=t},v=function(){e.lblEmail.text=Alloy.CFG.Languages.lblEmail,e.btnRequest.title=Alloy.CFG.Languages.btnRequest},I=function(){w(),v(),r.slowlyAppear(e.forgotPasswordView)};e.userForgot.addEventListener("open",function(){c.endLoading(),I()}),t["$.__views.mainTitle!click!closeWindow"]&&e.__views.mainTitle.addEventListener("click",g),t["$.__views.imgBack!click!closeWindow"]&&e.__views.imgBack.addEventListener("click",g),t["$.__views.btnRequest!click!forgotProcess"]&&e.__views.btnRequest.addEventListener("click",m),_.extend(e,i)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;