function initializeFont(i){"undefined"==typeof fontMaps[i]&&(fontMaps[i]={});try{for(var t=JSON.parse(Titanium.Filesystem.getFile("fontmaps/"+i+".json").read().text),e=t.icons,o=0;o<e.length;o++){var s=e[o].properties.name,r=e[o].properties.code;fontMaps[i][s]=String.fromCharCode(r)}}catch(l){console.log("*** There was a font parsing error.  Did you copy your font's selection.json file into the assets folder of your application and name it "+i+".json?"),console.log("*** fontParseError: "+l)}}var fontMaps={},getFontList=function(i,t,e){function o(i){i.source.text}"undefined"==typeof fontMaps[i]&&initializeFont(i),"undefined"==typeof t&&(t=32);var s=Ti.UI.createScrollView({layout:"vertical",top:t+"dp"});for(var r in fontMaps[i]){var l=Ti.UI.createLabel({left:"10dp",height:t+"dp",width:t+"dp",font:{fontFamily:i,fontSize:t+"dp"},text:fontMaps[i][r],textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,color:"black"});if("object"==typeof e)for(var a in e)l[a]=e[a];var y=Ti.UI.createLabel({text:r,size:parseInt(t/2,10).toString()+"dp",left:"10dp"}),n=Ti.UI.createView({layout:"horizontal",width:Ti.UI.FILL,height:Ti.UI.SIZE});n.addEventListener("click",o),n.add(l),n.add(y),s.add(n)}var d=Ti.UI.createWindow({backgroundColor:"white"}),p=parseInt(Titanium.Platform.version.split(".")[0],10);!0&&p>=7&&(d.top="20dp");var h=Titanium.UI.createButton({title:"Close",left:"10dp"});h.addEventListener("click",function(){d.close()});var c=Ti.UI.createLabel({text:"font: "+i,size:parseInt(t/2,10).toString()+"dp",left:"10dp"}),g=Ti.UI.createView({layout:"horizontal",top:0,height:t+"dp",width:Ti.UI.FILL,backgroundColor:"white",borderColor:"gray",borderWidth:1});g.add(h),g.add(c),d.add(g),d.add(s),d.open()},getIconAsLabel=function(i,t,e,o){"undefined"==typeof fontMaps[i]&&initializeFont(i);var s=Ti.UI.createLabel({height:e+"dp",width:e+"dp",font:{fontFamily:i,fontSize:e+"dp"},text:"string"==typeof t?fontMaps[i][t]:String.fromCharCode(t),textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,color:"black"});if("object"==typeof o)for(var r in o)s[r]=o[r];return s},getIconAsBlob=function(i,t,e,o){var s=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.SIZE});return s.add(getIconAsLabel(i,t,e,o)),s.toImage(null,!0)},getIconAsImageView=function(i,t,e,o){var s=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.SIZE});s.add(getIconAsLabel(i,t,e,o));var r=Ti.UI.createImageView({image:getIcon(i,t,e,o)});return r},getIcon=function(i,t,e,o){var s=Ti.Utils.md5HexDigest(i+"."+t+"."+e+("object"==typeof o?JSON.stringify(o):""))+".png",r=null;if(r=Ti.Android?Ti.Filesystem.getFile(Ti.Filesystem.externalStorageDirectory,s):Ti.Filesystem.getFile(Ti.Filesystem.applicationCacheDirectory,s),r.exists())return r.nativePath;var l=getIconAsBlob(i,t,e,o);return console.log(l.apiName),r.write(Ti.Android?l.media:l),console.log("hello path : "+r.nativePath),r.nativePath};exports.getIcon=getIcon,exports.getIconAsLabel=getIconAsLabel,exports.getIconAsBlob=getIconAsBlob,exports.getIconAsImageView=getIconAsImageView,exports.getFontList=getFontList;